28.06.2013 13:21:59.648 I: --------------------------------------------------
28.06.2013 13:21:59.649 I: Connect to Database ...
28.06.2013 13:21:59.651 I: Connected.
28.06.2013 13:21:59.652 I: [Mysql->query] set names utf8
28.06.2013 13:21:59.653 I: [Mysql->query] select * from params where ident='PREV_CLOSE_VAL' limit 1
28.06.2013 13:21:59.654 I: [Mysql->query] select * from portfolios where locked is null order by created
28.06.2013 13:21:59.655 I: Portfolios are found (3)
28.06.2013 13:21:59.655 I: Portfolio name is Модельный портфель and id is 3.
28.06.2013 13:21:59.655 I: [Mysql->query] select ph.portfolio_history_id, t.cnt from portfolio_history ph left join (select portfolio_history_id, count(*) as cnt from portfolio_history_parts where portfolio_history_id in (select portfolio_history_id from portfolio_history where portfolio_id=3) group by 1) t on t.portfolio_history_id=ph.portfolio_history_id where ph.portfolio_id=3 and t.cnt>0 order by ph.created desc 
28.06.2013 13:21:59.656 I: Portfolio history id is 44.
28.06.2013 13:21:59.657 I: [Mysql->query] select t.*, i.currency_id from (select instrument_id, operation, position, value, max(instrument_value_id) as instrument_value_id, max(exchange_rate_id) as exchange_rate_id, sum(amount) as amount from (select instrument_id, "keep" as operation, position, value, instrument_value_id, exchange_rate_id, amount from portfolio_history_parts where portfolio_history_id=44 and operation in ("keep","buy")) group by 1,2,3,4) t join instruments i on i.instrument_id=t.instrument_id 
28.06.2013 13:21:59.657 E: [Mysql->query] Every derived table must have its own alias
28.06.2013 13:21:59.657 I: Portfolio name is Модельный портфель #21 and id is 4.
28.06.2013 13:21:59.658 I: [Mysql->query] select ph.portfolio_history_id, t.cnt from portfolio_history ph left join (select portfolio_history_id, count(*) as cnt from portfolio_history_parts where portfolio_history_id in (select portfolio_history_id from portfolio_history where portfolio_id=4) group by 1) t on t.portfolio_history_id=ph.portfolio_history_id where ph.portfolio_id=4 and t.cnt>0 order by ph.created desc 
28.06.2013 13:21:59.658 E: Portfolio history is not found.
28.06.2013 13:21:59.658 I: Portfolio name is Модельный портфель #3 and id is 5.
28.06.2013 13:21:59.659 I: [Mysql->query] select ph.portfolio_history_id, t.cnt from portfolio_history ph left join (select portfolio_history_id, count(*) as cnt from portfolio_history_parts where portfolio_history_id in (select portfolio_history_id from portfolio_history where portfolio_id=5) group by 1) t on t.portfolio_history_id=ph.portfolio_history_id where ph.portfolio_id=5 and t.cnt>0 order by ph.created desc 
28.06.2013 13:21:59.659 E: Portfolio history is not found.
28.06.2013 13:21:59.660 I: Execution time is 0.011970043182373
