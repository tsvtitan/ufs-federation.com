28.06.2013 13:22:27.268 I: --------------------------------------------------
28.06.2013 13:22:27.554 I: Connect to Database ...
28.06.2013 13:22:28.435 I: Connected.
28.06.2013 13:22:28.734 I: [Mysql->query] set names utf8
28.06.2013 13:22:29.409 I: [Mysql->query] select * from params where ident='PREV_CLOSE_VAL' limit 1
28.06.2013 13:22:29.639 I: [Mysql->query] select * from portfolios where locked is null order by created
28.06.2013 13:22:30.210 I: Portfolios are found (3)
28.06.2013 13:22:32.016 I: Portfolio name is Модельный портфель and id is 3.
28.06.2013 13:22:34.809 I: [Mysql->query] select ph.portfolio_history_id, t.cnt from portfolio_history ph left join (select portfolio_history_id, count(*) as cnt from portfolio_history_parts where portfolio_history_id in (select portfolio_history_id from portfolio_history where portfolio_id=3) group by 1) t on t.portfolio_history_id=ph.portfolio_history_id where ph.portfolio_id=3 and t.cnt>0 order by ph.created desc 
28.06.2013 13:22:37.580 I: Portfolio history id is 44.
28.06.2013 13:22:38.888 I: [Mysql->query] select t.*, i.currency_id from (select instrument_id, operation, position, value, max(instrument_value_id) as instrument_value_id, max(exchange_rate_id) as exchange_rate_id, sum(amount) as amount from (select instrument_id, "keep" as operation, position, value, instrument_value_id, exchange_rate_id, amount from portfolio_history_parts where portfolio_history_id=44 and operation in ("keep","buy")) group by 1,2,3,4) t join instruments i on i.instrument_id=t.instrument_id 
28.06.2013 13:22:38.890 E: [Mysql->query] Every derived table must have its own alias
28.06.2013 13:23:31.374 I: Portfolio name is Модельный портфель #21 and id is 4.
28.06.2013 13:23:31.375 I: [Mysql->query] select ph.portfolio_history_id, t.cnt from portfolio_history ph left join (select portfolio_history_id, count(*) as cnt from portfolio_history_parts where portfolio_history_id in (select portfolio_history_id from portfolio_history where portfolio_id=4) group by 1) t on t.portfolio_history_id=ph.portfolio_history_id where ph.portfolio_id=4 and t.cnt>0 order by ph.created desc 
28.06.2013 13:23:31.376 E: Portfolio history is not found.
28.06.2013 13:23:31.376 I: Portfolio name is Модельный портфель #3 and id is 5.
28.06.2013 13:23:31.377 I: [Mysql->query] select ph.portfolio_history_id, t.cnt from portfolio_history ph left join (select portfolio_history_id, count(*) as cnt from portfolio_history_parts where portfolio_history_id in (select portfolio_history_id from portfolio_history where portfolio_id=5) group by 1) t on t.portfolio_history_id=ph.portfolio_history_id where ph.portfolio_id=5 and t.cnt>0 order by ph.created desc 
28.06.2013 13:23:31.378 E: Portfolio history is not found.
28.06.2013 13:23:31.379 I: Execution time is 64.300606966019
